<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.3">
<title>Data Analysis | Earthquake</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight,alt,wide.db1cdf55.css">
<link rel="modulepreload" href="./_observablehq/client.3297376f.js">
<link rel="modulepreload" href="./_observablehq/runtime.e080113b.js">
<link rel="modulepreload" href="./_observablehq/stdlib.82806664.js">
<link rel="modulepreload" href="./_node/d3@7.9.0/index.6063bdcc.js">
<link rel="modulepreload" href="./_node/@observablehq/plot@0.6.17/index.28168f6d.js">
<link rel="modulepreload" href="./_node/topojson-client@3.1.0/index.a55369bb.js">
<link rel="modulepreload" href="./_node/d3-geo@3.1.1/index.0cc60a7f.js">
<link rel="modulepreload" href="./_node/d3-drag@3.0.0/index.d3ae5f0f.js">
<link rel="modulepreload" href="./_import/components/timeline.a41f0a1d.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.17/d761ef9b.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/9cffc2bd.js">
<link rel="modulepreload" href="./_node/d3-array@3.2.4/index.f89e3560.js">
<link rel="modulepreload" href="./_node/d3-axis@3.0.0/index.34ded868.js">
<link rel="modulepreload" href="./_node/d3-brush@3.0.0/index.76e53644.js">
<link rel="modulepreload" href="./_node/d3-chord@3.0.1/index.eb7a3f59.js">
<link rel="modulepreload" href="./_node/d3-color@3.1.0/index.e8c126ff.js">
<link rel="modulepreload" href="./_node/d3-contour@4.0.2/index.dec5b7e9.js">
<link rel="modulepreload" href="./_node/d3-delaunay@6.0.4/index.1771ba9f.js">
<link rel="modulepreload" href="./_node/d3-dispatch@3.0.1/index.be49ca5f.js">
<link rel="modulepreload" href="./_node/d3-dsv@3.0.1/index.48418e2e.js">
<link rel="modulepreload" href="./_node/d3-ease@3.0.1/index.09153f73.js">
<link rel="modulepreload" href="./_node/d3-fetch@3.0.1/index.2c1c499d.js">
<link rel="modulepreload" href="./_node/d3-force@3.0.0/index.952bd793.js">
<link rel="modulepreload" href="./_node/d3-format@3.1.0/index.da30fb93.js">
<link rel="modulepreload" href="./_node/d3-hierarchy@3.1.2/index.0a013d9a.js">
<link rel="modulepreload" href="./_node/d3-interpolate@3.0.1/index.7ed7c7fe.js">
<link rel="modulepreload" href="./_node/d3-path@3.1.0/index.c2b3c473.js">
<link rel="modulepreload" href="./_node/d3-polygon@3.0.1/index.32c3d834.js">
<link rel="modulepreload" href="./_node/d3-quadtree@3.0.1/index.e9fed2eb.js">
<link rel="modulepreload" href="./_node/d3-random@3.0.1/index.fd2cc361.js">
<link rel="modulepreload" href="./_node/d3-scale@4.0.2/index.0574410e.js">
<link rel="modulepreload" href="./_node/d3-scale-chromatic@3.1.0/index.7961cbed.js">
<link rel="modulepreload" href="./_node/d3-selection@3.0.0/index.13204b25.js">
<link rel="modulepreload" href="./_node/d3-shape@3.2.0/index.b551bc1c.js">
<link rel="modulepreload" href="./_node/d3-time@3.1.0/index.8fcc123e.js">
<link rel="modulepreload" href="./_node/d3-time-format@4.1.0/index.08e7c36a.js">
<link rel="modulepreload" href="./_node/d3-timer@3.0.1/index.0ee6092b.js">
<link rel="modulepreload" href="./_node/d3-transition@3.0.1/index.d140d658.js">
<link rel="modulepreload" href="./_node/d3-zoom@3.0.0/index.78e4486d.js">
<link rel="modulepreload" href="./_node/isoformat@0.2.1/index.0882e9d9.js">
<link rel="modulepreload" href="./_node/interval-tree-1d@1.0.4/index.eeaa354d.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/e780feca.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/18cbf477.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/53fe8176.js">
<link rel="modulepreload" href="./_node/internmap@2.0.3/index.4106013c.js">
<link rel="modulepreload" href="./_node/delaunator@5.0.1/index.70ae1478.js">
<link rel="modulepreload" href="./_node/binary-search-bounds@2.0.5/index.990a1c6d.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/e93ca09f.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/0f2de24d.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/65eb105b.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/7ef8fb2e.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/aeb57b94.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/1d2aed74.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/5ced1d52.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/9ba9c7f3.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/4202580c.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/cdd7e898.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/b4e2ad9a.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/5e804d15.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/86074ef6.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/40599fb3.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/e49e792c.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/8d1e5425.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/20d3f133.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/7553081f.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/0dfd751c.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/3c90ee06.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/843b6a76.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/ba24c2e7.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/4d94e5b7.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/6d3a6726.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/9f03c579.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/07c9626f.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/b58a267d.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/004da2ac.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/b5786b3f.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/cbf6ba23.js">
<link rel="modulepreload" href="./_node/robust-predicates@3.0.2/index.bdc459cc.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/e08981d9.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/02d43215.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/aa00730b.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.3297376f.js";
import {registerFile} from "./_observablehq/stdlib.82806664.js";

registerFile("./static/Updated_Clean_EarthquakeData.csv", {"name":"./static/Updated_Clean_EarthquakeData.csv","mimeType":"text/csv","path":"./_file/static/Updated_Clean_EarthquakeData.bf53df51.csv","lastModified":1745998591608,"size":248077});

define({id: "92a067c4", inputs: ["FileAttachment","d3","topojson"], outputs: ["data","dataParsed","land"], body: async (FileAttachment,d3,topojson) => {
const data = await FileAttachment("./static/Updated_Clean_EarthquakeData.csv").csv();
const dataParsed = data.map(d => ({
  ...d,
  time: new Date(d.time),
  country: d.place.includes(",")
    ? d.place.split(",").pop().trim()
    : d.place.trim()
}));

const land = await d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2/land-110m.json")
  .then(world => topojson.feature(world, world.objects.land));

return {data,dataParsed,land};
}});

define({id: "09aeadac", outputs: ["d3","Plot","topojson","geoOrthographic","geoPath","drag","legend","timeline"], body: async () => {
const [d3, Plot, topojson, {geoOrthographic, geoPath}, {drag}, {legend}, {timeline}] = await Promise.all([import("./_node/d3@7.9.0/index.6063bdcc.js"), import("./_node/@observablehq/plot@0.6.17/index.28168f6d.js"), import("./_node/topojson-client@3.1.0/index.a55369bb.js"), import("./_node/d3-geo@3.1.1/index.0cc60a7f.js"), import("./_node/d3-drag@3.0.0/index.d3ae5f0f.js"), import("./_node/@observablehq/plot@0.6.17/index.28168f6d.js"), import("./_import/components/timeline.a41f0a1d.js")]);

return {d3,Plot,topojson,geoOrthographic,geoPath,drag,legend,timeline};
}});

define({id: "0dbc224a", inputs: ["dataParsed","d3","Plot"], outputs: ["cleanData","sortedData","timeExtent","magExtent","depthExtent","formatDate","slider","timeLabel","startDateLabel","endDateLabel","timeScale","inverseTimeScale","updateScatterPlot"], body: (dataParsed,d3,Plot) => {
document.getElementById("scatter-plot").innerHTML = "";

// Clean and filter the data
const cleanData = dataParsed.filter(d =>
  d.mag !== null && !isNaN(d.mag) &&
  d.depth !== null && !isNaN(d.depth)
);

// Sort the data by time
const sortedData = cleanData.sort((a, b) => new Date(a.time) - new Date(b.time));

// Time and scale setup
const timeExtent = d3.extent(sortedData, d => new Date(d.time));
const magExtent = d3.extent(cleanData, d => +d.mag);
const depthExtent = d3.extent(cleanData, d => +d.depth);

const formatDate = d3.timeFormat("%Y-%m-%d");

// Slider and labels
const slider = document.getElementById("time-slider");
const timeLabel = document.getElementById("time-label");
const startDateLabel = document.getElementById("start-date-label");
const endDateLabel = document.getElementById("end-date-label");

// Scales for converting slider <-> time
const timeScale = d3.scaleTime()
  .domain(timeExtent)
  .range([0, 100]);

const inverseTimeScale = d3.scaleLinear()
  .domain([0, 100])
  .range(timeExtent);

// Set initial labels
startDateLabel.textContent = formatDate(timeExtent[0]);
endDateLabel.textContent = formatDate(timeExtent[1]);

// Initial render (end of time range)
updateScatterPlot(timeExtent[1]);
timeLabel.textContent = `Showing earthquakes up to: ${formatDate(timeExtent[1])}`;

// Event listener
slider.addEventListener("input", () => {
  const sliderDate = inverseTimeScale(+slider.value);
  timeLabel.textContent = `Showing earthquakes up to: ${formatDate(sliderDate)}`;
  updateScatterPlot(sliderDate);
});

// Scatter plot function
function updateScatterPlot(dateCutoff) {
  const filtered = sortedData.filter(d => new Date(d.time) <= dateCutoff);

  document.getElementById("scatter-plot").innerHTML = "";
  document.getElementById("scatter-plot").appendChild(
    Plot.plot({
      width: 500,
      height: 280,
      x: {
        label: "Depth (km)",
        domain: depthExtent,
        nice: false,
        type: "linear",
        labelFontSize: 16
      },
      y: {
        label: "Magnitude",
        domain: magExtent,
        nice: false,
        type: "linear",
        labelFontSize: 16 
      },
      marks: [
        Plot.dot(filtered, {
          x: d => +d.depth,
          y: d => +d.mag,
          r: 2,
          fill: "#D95F02",
          fillOpacity: 0.7
        })
      ]
    })
  );
}

return {cleanData,sortedData,timeExtent,magExtent,depthExtent,formatDate,slider,timeLabel,startDateLabel,endDateLabel,timeScale,inverseTimeScale,updateScatterPlot};
}});

define({id: "d38b80fe", inputs: ["d3","dataParsed"], outputs: ["prepareData","drawChart","initialN"], body: (d3,dataParsed) => {
// bar chart -----------------------------
function prepareData(n) {
  const byCountry = d3.rollups(
    dataParsed,
    v => ({
      count: v.length,
      avgMag: d3.mean(v, d => d.mag),
      avgDepth: d3.mean(v, d => d.depth)
    }),
    d => d.country
  ).filter(d => d[0]) //filters empty/null countries;
  return byCountry
    .sort((a, b) => d3.descending(a[1].count, b[1].count))
    .slice(0, n)
    .map(([country, stats]) => ({
      country,
      count: stats.count,
      avgMag: stats.avgMag,
      avgDepth: stats.avgDepth
    }));
}

function drawChart(n, lineMetric = "avgMag") {
  const chartData = prepareData(n); 

d3.select("#chart").html(""); // Clear old chart
  d3.select("#top-n").on("change", function() {
    const n = +this.value;
    const metric = d3.select("#lineMetric").property("value");
    drawChart(n, metric);
  });

  d3.select("#lineMetric").on("change", function() {
    const n = +d3.select("#top-n").property("value");
    const metric = this.value;
    drawChart(n, metric);
  });

  d3.select("#line-label").text(lineMetric === "avgMag" ? "Average Magnitude" : "Average Depth");
  d3.select("#line-label").text(lineMetric === "avgMag" ? "Average Magnitude" : "Average Depth");
  const margin = { top: 30, right: 50, bottom: 110, left: 50 },
        width = 550 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

  const svg = d3.select("#chart")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  const x = d3.scaleBand()
    .domain(chartData.map(d => d.country))
    .range([0, width])
    .padding(0.2);

  const yLeft = d3.scaleLinear()
    .domain([0, d3.max(chartData, d => d.count)]).nice()
    .range([height, 0]);

  const yRight = d3.scaleLinear()
    .domain([0, d3.max(chartData, d => d[lineMetric])]).nice()
    .range([height, 0]);

  const metricLabels = {
  avgMag: "Average Magnitude",
  avgDepth: "Average Depth [km]"
  };


  // Axes
  svg.append("g")
    .call(d3.axisLeft(yLeft));

  svg.append("g")
    .attr("transform", `translate(${width},0)`)
    .call(d3.axisRight(yRight));

  svg.append("g")
    .attr("transform", `translate(0,${height})`)
    .call(d3.axisBottom(x))
    .selectAll("text")
    .attr("transform", "rotate(-45)") // rotate the text
    .style("text-anchor", "end")      // align the text properly
    .attr("dx", "-0.8em")             // tweak horizontal spacing
    .attr("dy", "0.15em");            // tweak vertical spacing

  // x-axis title
  svg.append("text")
  .attr("text-anchor", "middle")
  .attr("x", width / 2)
  .attr("y", height + margin.bottom - 20) // Slightly below the axis
  .text("Countries");

  // left y-axis title
  svg.append("text")
  .attr("text-anchor", "middle")
  .attr("transform", `rotate(-90)`)
  .attr("x", -height / 2)
  .attr("y", -margin.left + 15) // Adjust this if needed
  .text("Number of Earthquakes");

  // right y-axit title
  svg.append("text")
  .attr("text-anchor", "middle")
  .attr("transform", `rotate(-90)`)
  .attr("x", -height / 2)
  .attr("y", width + margin.right - 10) // Adjust this based on your layout
  .text(metricLabels[lineMetric]);


  // Bars (left y-axis)
  svg.selectAll(".bar")
    .data(chartData)
    .enter()
    .append("rect")
    .attr("x", d => x(d.country))
    .attr("y", d => yLeft(d.count))
    .attr("width", x.bandwidth())
    .attr("height", d => height - yLeft(d.count))
    .attr("fill", "#a1b276"); // colour bar chart

  // Choose color based on metric
const lineColor = lineMetric === "avgMag" ? "#D95F02" : "steelblue";

// Line (right y-axis)
const line = d3.line()
  .x(d => x(d.country) + x.bandwidth() / 2)
  .y(d => yRight(d[lineMetric]));

svg.append("path")
  .datum(chartData)
  .attr("fill", "none")
  .attr("stroke", lineColor)
  .attr("stroke-width", 2)
  .attr("d", line);

// Circles on line
svg.selectAll(".dot")
  .data(chartData)
  .enter()
  .append("circle")
  .attr("cx", d => x(d.country) + x.bandwidth() / 2)
  .attr("cy", d => yRight(d[lineMetric]))
  .attr("r", 4)
  .attr("fill", lineColor);

}

const initialN = +d3.select("#top-n").property("value");
  drawChart(initialN); // Use actual selected value

  d3.select("#top-n").on("change", function() {
  const n = +this.value;
  drawChart(n); // updates when selection changes
  });


return {prepareData,drawChart,initialN};
}});

define({id: "7fac35fc", inputs: ["d3","sortedData","formatDate","updateScatterPlot","timeExtent","timeLabel","slider","inverseTimeScale"], outputs: ["updateHistogram"], body: (d3,sortedData,formatDate,updateScatterPlot,timeExtent,timeLabel,slider,inverseTimeScale) => {
// interactive time histogram
function updateHistogram(selectedDate) {
  // Group earthquakes by date (format: YYYY-MM-DD)
  const dateCounts = d3.rollups(
    sortedData,
    v => v.length,
    d => formatDate(new Date(d.time))
  ).sort((a, b) => d3.ascending(a[0], b[0]));

  const dates = dateCounts.map(d => d[0]);
  const counts = dateCounts.map(d => d[1]);

  // Find the index of the selected date (or closest previous date)
  const selectedDateStr = formatDate(selectedDate);
  const selectedIndex = dates.findIndex(d => d === selectedDateStr);

  // Render histogram
  document.getElementById("histogram-plot").innerHTML = "";
  const width = 400, height = 150, margin = {top: 20, right: 20, bottom: 60, left: 60};

  const x = d3.scaleBand()
    .domain(dates)
    .range([margin.left, width - margin.right])
    .padding(0.1);

  const y = d3.scaleLinear()
    .domain([0, d3.max(counts)]).nice()
    .range([height - margin.bottom, margin.top]);

  const svg = d3.create("svg")
    .attr("width", width)
    .attr("height", height);

  // Bars
  svg.append("g")
    .selectAll("rect")
    .data(dateCounts)
    .join("rect")
      .attr("x", d => x(d[0]))
      .attr("y", d => y(d[1]))
      .attr("width", x.bandwidth())
      .attr("height", d => y(0) - y(d[1]))
      .attr("fill", (d, i) => i === selectedIndex ? "#3a6ba1" : "#b8dfe0");

  // X axis (show fewer ticks for readability)
  svg.append("g")
    .attr("transform", `translate(0,${height - margin.bottom})`)
    .call(d3.axisBottom(x).tickValues(dates.filter((d, i) => i % Math.ceil(dates.length / 10) === 0)))
    .selectAll("text")
    .attr("transform", "rotate(-45)")
    .style("text-anchor", "end");

  // Y axis
  svg.append("g")
    .attr("transform", `translate(${margin.left},0)`)
    .call(d3.axisLeft(y).ticks(4));

  // Axis labels
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", height)
    .attr("text-anchor", "middle")
    .attr("font-size", 12)
    .text("Date");

  svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("x", -height / 2)
    .attr("y", 12)
    .attr("text-anchor", "middle")
    .attr("font-size", 12)
    .text("Earthquake Count");

  document.getElementById("histogram-plot").appendChild(svg.node());
}

// Initial render (end of time range)
updateScatterPlot(timeExtent[1]);
updateHistogram(timeExtent[1]);
timeLabel.textContent = `Showing earthquakes up to: ${formatDate(timeExtent[1])}`;

// Event listener
slider.addEventListener("input", () => {
  const sliderDate = inverseTimeScale(+slider.value);
  timeLabel.textContent = `Showing earthquakes up to: ${formatDate(sliderDate)}`;
  updateScatterPlot(sliderDate);
  updateHistogram(sliderDate);
});
return {updateHistogram};
}});

define({id: "f1de365f", inputs: ["data"], body: (data) => {
// Debug output
// console.log(data); // Uncomment for debugging purposes
data.forEach(quake => {
  if (quake.place) {
    console.log(quake.place);
  } else {
    console.warn("Missing place information for earthquake:", quake);
  }
});
}});

</script>
</head>
<body>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Earthquake</a></li>
  </ol>
  <ol>
    <li class="observablehq-link observablehq-link-active"><a href="./data_analysis">Data Analysis</a></li>
    <li class="observablehq-link"><a href="./written_information">Example report</a></li>
  </ol>
</nav>
<script>{const e=document.querySelector("#observablehq-sidebar"),o=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?o.checked=r==="true":o.indeterminate=!0;for(const t of document.querySelectorAll("#observablehq-sidebar summary")){const s=t.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${t.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<!-- Load and transform the data -->
<div class="observablehq observablehq--block"><!--:92a067c4:--></div>
<!-- Imports and consts required -->
<div class="observablehq observablehq--block"><!--:09aeadac:--></div>
<div class="hero">
  <h1>Deep Dive into the Data</h1>
  <h2>Understanding the Earthquake data through various interactive plots</h2>
</div>
<div style="display: flex; align-items: flex-start; gap: 2rem;">
  <div id="scatter-container" style="flex: 1; min-width: 0;">
  <div id="scatter-plot"></div>
  <div style="margin-top: 1rem; width: 400px;">
    <input type="range" id="time-slider" min="0" max="100" value="100" style="width: 100%;">
    <div style="display: flex; justify-content: space-between; font-size: 12px;">
      <span id="start-date-label"></span>
      <span id="end-date-label"></span>
    </div>
    <div id="time-label" style="font-size: 13px; margin-top: 0.5rem;"></div>
    <div id="histogram-plot" style="margin-top: 2rem;"></div> 
  </div>
</div>
<style>
#time-slider::-webkit-slider-thumb {
  background: #b8dfe0;
}
#time-slider::-webkit-slider-runnable-track {
  background: #b8dfe0;
}
#time-slider::-moz-range-thumb {
  background: #b8dfe0;
}
#time-slider::-moz-range-track {
  background: #b8dfe0;
}
#time-slider::-ms-fill-lower,
#time-slider::-ms-fill-upper {
  background: #b8dfe0;
}
</style>
  <!-- Frequency plot (bar/line by country) -->
  <div id="chart-container" style="flex: 1; min-width: 0;">
    <div>
      <select id="top-n">
        <option value="5">Top 5</option>
        <option value="10" selected="">Top 10</option>
        <option value="15">Top 15</option>
        <option value="20">Top 20</option>
      </select>
      <label for="lineMetric">Line graph metric:</label>
      <select id="lineMetric">
        <option value="avgMag">Average Magnitude</option>
        <option value="avgDepth">Average Depth</option>
      </select>
    </div>
    <div id="chart"></div>
    <div style="margin-top: 1rem;">
  <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
    <div style="width: 20px; height: 20px; background-color: #a1b276; margin-right: 8px;"></div>
    <span>Number of Earthquakes</span>
  </div>
    <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
      <svg width="20" height="20" style="margin-right: 8px;">
        <line x1="0" y1="10" x2="20" y2="10" stroke="#D95F02" stroke-width="2"></line>
        <circle cx="10" cy="10" r="4" fill="#D95F02"></circle>
      </svg>
      <span>Average Magnitude</span>
    </div>
    <div style="display: flex; align-items: center;">
      <svg width="20" height="20" style="margin-right: 8px;">
        <line x1="0" y1="10" x2="20" y2="10" stroke="steelblue" stroke-width="2"></line>
        <circle cx="10" cy="10" r="4" fill="steelblue"></circle>
      </svg>
      <span>Average Depth</span>
    </div>
  </div>
  </div>
</div>
<div class="observablehq observablehq--block"><!--:0dbc224a:--></div>
<div class="observablehq observablehq--block"><!--:d38b80fe:--></div>
<div class="observablehq observablehq--block"><!--:7fac35fc:--></div>
<div class="observablehq observablehq--block"><!--:f1de365f:--></div>
</main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./"><span>Earthquake</span></a><a rel="next" href="./written_information"><span>Example report</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-06-26T08:57:50">Jun 26, 2025</a>.</div>
</footer>
</div>
</body>
</html>
